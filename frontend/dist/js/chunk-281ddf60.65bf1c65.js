(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-281ddf60"],{"1d8d":function(t,e,n){"use strict";var a=n("36f7"),s=n.n(a);s.a},"23f8":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"moderation_header"},[n("h1",{staticClass:"moderation_header__h1"},[t._v("Moderation")]),n("div",{staticClass:"moderation_header__tabs"},[n("div",{staticClass:"tab_button",class:{"tab_button--selected":"reports"===t.selectedTab},on:{click:function(e){return t.$router.push("reports")}}},[t._v(" Reports ")]),n("div",{staticClass:"tab_button",class:{"tab_button--selected":"bans"===t.selectedTab},on:{click:function(e){return t.$router.push("bans")}}},[t._v(" Banned users ")])])])},s=[],o={name:"ModerationHeader",props:["selected-tab"]},i=o,d=(n("1d8d"),n("2877")),l=Object(d["a"])(i,a,s,!1,null,"1348f9d8",null);e["a"]=l.exports},"26c1":function(t,e,n){"use strict";var a=n("fbd6"),s=n.n(a);s.a},"36f7":function(t,e,n){},5016:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("menu-tooltip",{staticClass:"select_button",class:{"select_button--touch":!t.touchDisabled},model:{value:t.menuOpen,callback:function(e){t.menuOpen=e},expression:"menuOpen"}},[n("template",{slot:"button"},[t.options.length?n("div",{staticClass:"button button--thin_text",class:{"select_button__button--selected":t.menuOpen},on:{click:function(e){t.menuOpen=!0}}},[t._v(" "+t._s(t.options[t.selectedIndex].name)+" "),n("font-awesome-icon",{staticClass:"button__icon select_button__icon",attrs:{icon:["fa","chevron-down"],"fixed-width":""}})],1):n("div",{staticClass:"button"},[t._v(" No options ")])]),n("template",{slot:"menu"},t._l(t.options,(function(e,a){return n("div",{key:"select-button-option-"+e.name+a,staticClass:"select_button__option",class:{"select_button__option--disabled":e.disabled,"select_button__option--selected":a===t.selectedIndex&&!e.disabled},on:{click:function(n){return t.select(a,e.disabled)}}},[t._v(" "+t._s(e.name)+" ")])})),0)],2)},s=[],o=(n("4160"),n("159b"),n("6fab")),i={name:"SelectButton",props:["options","value","name","touch-disabled"],components:{MenuTooltip:o["a"]},methods:{select:function(t,e){e||(this.selectedIndex=t,this.menuOpen=!1,this.$emit("input",this.options[t].value))},getIndexFromValue:function(){var t=0,e=this;return null!==this.value&&this.options.forEach((function(n,a){n.value===e.value&&(t=a)})),t}},data:function(){return{selectedIndex:this.getIndexFromValue(),menuOpen:!1}},watch:{value:function(){this.selectedIndex=this.getIndexFromValue()}}},d=i,l=(n("b893"),n("2877")),r=Object(l["a"])(d,a,s,!1,null,"254cddec",null);e["a"]=r.exports},"6f58":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"overlay_message"},[n("span",{staticClass:"overlay_message__loading"},[n("loading-icon",{attrs:{dark:!0}})],1),t._v(" Loading... ")])},s=[],o=n("c5af"),i={name:"LoadingMessage",components:{LoadingIcon:o["a"]}},d=i,l=n("2877"),r=Object(l["a"])(d,a,s,!1,null,null,null);e["a"]=r.exports},"6fab":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"menu_tooltip",class:{"menu_tooltip--touch":!t.touchDisabled}},[n("div",{staticClass:"menu_tooltip__overlay",class:{"menu_tooltip__overlay--show":t.value},on:{click:function(e){return t.$emit("input",!1)}}}),t._t("button"),n("div",{staticClass:"menu_tooltip__menu",class:{"menu_tooltip__menu--show":t.value},style:{top:t.top,width:t.width}},[n("div",{staticClass:"menu_tooltip__menu__inner"},[t._t("menu")],2)])],2)},s=[],o={name:"MenuTooltip",props:["value","top","width","touch-disabled"]},i=o,d=(n("f775"),n("2877")),l=Object(d["a"])(i,a,s,!1,null,"1713e464",null);e["a"]=l.exports},"74b8":function(t,e,n){},a157:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"admin_moderation"},[n("div",{staticClass:"admin_moderation__header"},[n("moderation-header",{attrs:{"selected-tab":"bans"}}),n("button",{staticClass:"button button--blue",on:{click:t.toggleShowAddNewBanModal}},[t._v(" Add new ban ")])],1),n("transition",{attrs:{name:"fade",mode:"out-in"}},[t.bans?t.bans.length?n("table",{key:"bans",staticClass:"admin_moderation__table"},[n("tr",[n("th",[t._v("User")]),n("th",[t._v("Ban type")]),n("th",[t._v("Date banned")]),n("th",[t._v("Message")]),n("th",[t._v("Action")])]),t._l(t.bans,(function(e,a){return n("tr",{key:"ban-row-"+a},[n("td",[t._v(t._s(e.User.username))]),n("td",[t._v(t._s(e.type))]),n("td",[t._v(t._s(t._f("formatDate")(e.createdAt)))]),n("td",[e.message?[t._v(t._s(e.message))]:n("i",[t._v("No message given")])],2),n("td",[n("button",{staticClass:"button button--red",on:{click:function(n){return t.deleteBan(e,a)}}},[t._v(" Delete ban ")])])])}))],2):n("div",{key:"no bans",staticClass:"overlay_message"},[n("font-awesome-icon",{attrs:{icon:["fa","thumbs-up"]}}),t._v(" No banned users ")],1):n("loading-message",{key:"loading"})],1),n("modal-window",{attrs:{width:"30rem","no-padding":!0},model:{value:t.$store.state.moderation.showAddNewBanModal,callback:function(e){t.$set(t.$store.state.moderation,"showAddNewBanModal",e)},expression:"$store.state.moderation.showAddNewBanModal"}},[n("div",{staticClass:"admin_moderation__add_new_ban_modal",attrs:{slot:"main"},slot:"main"},[n("div",{staticClass:"admin_moderation__add_new_ban_modal__overlay",class:{"admin_moderation__add_new_ban_modal__overlay--show":t.loading}},[n("loading-icon")],1),n("h2",[t._v("Ban or block a user")]),n("p",[t._v(" Search for the user to ban, then select the relevant ban type for the user ")]),n("form",{on:{submit:function(e){return e.preventDefault(),t.addBan(e)}}},[n("div",[n("fancy-input",{attrs:{placeholder:"Username to ban",width:"15rem",large:!0},model:{value:t.$store.state.moderation.username,callback:function(e){t.$set(t.$store.state.moderation,"username",e)},expression:"$store.state.moderation.username"}})],1),n("div",[n("fancy-input",{attrs:{placeholder:"Message to user (optional)",width:"15rem",large:!0},model:{value:t.$store.state.moderation.message,callback:function(e){t.$set(t.$store.state.moderation,"message",e)},expression:"$store.state.moderation.message"}})],1),n("div",[n("select-button",{attrs:{options:t.$store.state.moderation.options,name:"test"},model:{value:t.$store.state.moderation.selectedOption,callback:function(e){t.$set(t.$store.state.moderation,"selectedOption",e)},expression:"$store.state.moderation.selectedOption"}})],1),n("input",{staticStyle:{display:"none"},attrs:{type:"submit"}})])]),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("button",{staticClass:"button button--modal button--green",on:{click:t.addBan}},[t._v(" Add ban ")]),n("button",{staticClass:"button button--modal",on:{click:t.toggleShowAddNewBanModal}},[t._v(" Cancel ")])])])],1)},s=[],o=(n("d81d"),n("a434"),n("498a"),n("6307")),i=n("80e3"),d=n("5016"),l=n("23f8"),r=n("c5af"),c=n("6f58"),u=n("c4b0"),m=n.n(u),_={name:"AdminDashboard",components:{ModalWindow:o["a"],FancyInput:i["a"],SelectButton:d["a"],ModerationHeader:l["a"],LoadingIcon:r["a"],LoadingMessage:c["a"]},data:function(){return{loading:!1,bans_:null}},computed:{bans:function(){return this.bans_?this.bans_.map((function(t){return t.ipBanned?t.type="IP banned":t.canCreateThreads&&!t.canCreatePosts?t.type="Posting replies":t.canCreatePosts&&!t.canCreateThreads?t.type="Creating threads":t.type="Posting replies and creating threads",t})):null}},methods:{toggleShowAddNewBanModal:function(){this.$store.commit("moderation/setModal",!this.$store.state.moderation.showAddNewBanModal),this.$store.dispatch("moderation/clearModal")},addBan:function(){var t=this,e=this.$store.state.moderation,n={username:e.username};e.message.trim().length&&(n.message=e.message),"both"===e.selectedOption?(n.canCreatePosts=!1,n.canCreateThreads=!1):"thread"===e.selectedOption?n.canCreateThreads=!1:"post"===e.selectedOption?n.canCreatePosts=!1:n.ipBanned=!0,this.loading=!0,this.axios.post("/api/v1/ban",n).then((function(e){t.loading=!1,t.bans_.push(e.data),t.toggleShowAddNewBanModal(),t.$store.dispatch("moderation/clearModal")})).catch((function(e){t.loading=!1,m()(t.$store)(e)}))},deleteBan:function(t,e){var n=this;this.axios.delete("/api/v1/ban/"+t.id).then((function(){n.bans_.splice(e,1)})).catch(m()(this.$store))}},mounted:function(){var t=this;this.$store.dispatch("setTitle","admin | moderation"),this.axios.get("/api/v1/ban").then((function(e){t.bans_=e.data})).catch(m()(this.$store))}},b=_,p=(n("26c1"),n("2877")),h=Object(p["a"])(b,a,s,!1,null,"46e6890f",null);e["default"]=h.exports},b893:function(t,e,n){"use strict";var a=n("74b8"),s=n.n(a);s.a},bc5b:function(t,e,n){},f775:function(t,e,n){"use strict";var a=n("bc5b"),s=n.n(a);s.a},fbd6:function(t,e,n){}}]);
//# sourceMappingURL=chunk-281ddf60.65bf1c65.js.map