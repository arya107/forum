{"version":3,"sources":["webpack:///./src/components/routes/SettingsAccount.vue?37d1","webpack:///src/components/routes/SettingsAccount.vue","webpack:///./src/components/routes/SettingsAccount.vue?2637","webpack:///./src/components/routes/SettingsAccount.vue","webpack:///./src/components/routes/SettingsAccount.vue?5852","webpack:///./src/assets/js/logger.js","webpack:///./src/components/ConfirmModal.vue?6dee","webpack:///src/components/ConfirmModal.vue","webpack:///./src/components/ConfirmModal.vue?4dc5","webpack:///./src/components/ConfirmModal.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","on","deleteAccount","model","value","callback","$$v","showConfirmModal","expression","_v","password","errors","$set","loading","savePassword","_m","deleteAccountLoading","$event","staticRenderFns","name","components","FancyInput","LoadingButton","ConfirmModal","data","current","new","computed","methods","length","axios","mounted","$store","dispatch","component","route","resourceId","get","then","res","post","id","catch","console","log","showModal","setShowModal","staticStyle","slot","_t","class","buttonColor","confirm","_s","text","props","ModalWindow","color","watch","val","$emit"],"mappings":"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","file":"js/chunk-1066772e.3c898263.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"route_container\"},[_c('confirm-modal',{attrs:{\"color\":\"red\",\"text\":\"Yes, delete it\"},on:{\"confirm\":_vm.deleteAccount},model:{value:(_vm.showConfirmModal),callback:function ($$v) {_vm.showConfirmModal=$$v},expression:\"showConfirmModal\"}},[_vm._v(\" Are you sure you want to delete your account? \")]),_c('div',{staticClass:\"h1\"},[_vm._v(\"Account settings\")]),_c('div',[_c('div',{staticClass:\"h3\"},[_vm._v(\"Change your password\")]),_c('p',{staticClass:\"p--condensed\"},[_vm._v(\"For security, enter your current password\")]),_c('div',[_c('fancy-input',{attrs:{\"placeholder\":\"Current password\",\"error\":_vm.password.errors['current password'],\"type\":\"password\"},model:{value:(_vm.password.current),callback:function ($$v) {_vm.$set(_vm.password, \"current\", $$v)},expression:\"password.current\"}})],1),_c('div',[_c('fancy-input',{attrs:{\"placeholder\":\"New password\",\"error\":_vm.password.errors['new password'],\"type\":\"password\"},model:{value:(_vm.password.new),callback:function ($$v) {_vm.$set(_vm.password, \"new\", $$v)},expression:\"password.new\"}})],1),_c('loading-button',{staticClass:\"button button--green\",attrs:{\"loading\":_vm.password.loading},on:{\"click\":_vm.savePassword}},[_vm._v(\"Change password\")])],1),_c('div',[_c('div',{staticClass:\"h3 h3--margin_top\"},[_vm._v(\"Delete your account\")]),_vm._m(0),_c('loading-button',{staticClass:\"button button--red\",attrs:{\"loading\":_vm.deleteAccountLoading},on:{\"click\":function($event){_vm.showConfirmModal = true}}},[_vm._v(\"Delete my account\")])],1)],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('p',{staticClass:\"p--condensed\"},[_vm._v(\" Once this is done, your account \"),_c('strong',[_vm._v(\"cannot\")]),_vm._v(\" be restored \"),_c('br'),_vm._v(\" Your current posts however will be retained \")])}]\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"route_container\">\n    <confirm-modal\n      v-model=\"showConfirmModal\"\n      @confirm=\"deleteAccount\"\n      color=\"red\"\n      text=\"Yes, delete it\"\n    >\n      Are you sure you want to delete your account?\n    </confirm-modal>\n\n    <div class=\"h1\">Account settings</div>\n    <div>\n      <div class=\"h3\">Change your password</div>\n      <p class=\"p--condensed\">For security, enter your current password</p>\n      <div>\n        <fancy-input\n          placeholder=\"Current password\"\n          v-model=\"password.current\"\n          :error=\"password.errors['current password']\"\n          type=\"password\"\n        ></fancy-input>\n      </div>\n      <div>\n        <fancy-input\n          placeholder=\"New password\"\n          v-model=\"password.new\"\n          :error=\"password.errors['new password']\"\n          type=\"password\"\n        ></fancy-input>\n      </div>\n      <loading-button\n        class=\"button button--green\"\n        @click=\"savePassword\"\n        :loading=\"password.loading\"\n        >Change password</loading-button\n      >\n    </div>\n    <div>\n      <div class=\"h3 h3--margin_top\">Delete your account</div>\n      <p class=\"p--condensed\">\n        Once this is done, your account <strong>cannot</strong> be restored\n        <br />\n        Your current posts however will be retained\n      </p>\n      <loading-button\n        class=\"button button--red\"\n        :loading=\"deleteAccountLoading\"\n        @click=\"showConfirmModal = true\"\n        >Delete my account</loading-button\n      >\n    </div>\n  </div>\n</template>\n\n<script>\nimport FancyInput from \"../FancyInput\";\nimport LoadingButton from \"../LoadingButton\";\nimport ConfirmModal from \"../ConfirmModal\";\n\nimport AjaxErrorHandler from \"../../assets/js/errorHandler\";\nimport logger from \"../../assets/js/logger\";\n\nexport default {\n  name: \"settingsAccount\",\n  components: {\n    FancyInput,\n    LoadingButton,\n    ConfirmModal,\n  },\n  data() {\n    return {\n      password: {\n        loading: false,\n\n        current: \"\",\n        new: \"\",\n\n        errors: {\n          \"new password\": \"\",\n          \"current password\": \"\",\n        },\n      },\n\n      deleteAccountLoading: false,\n      showConfirmModal: false,\n    };\n  },\n  computed: {},\n  methods: {\n    savePassword() {\n      this.password.errors[\"current password\"] = \"\";\n      this.password.errors[\"new password\"] = \"\";\n\n      if (!this.password.current.length) {\n        this.password.errors[\"current password\"] = \"Cannot be blank\";\n        return;\n      }\n      if (!this.password.new.length) {\n        this.password.errors[\"new password\"] = \"Cannot be blank\";\n        return;\n      }\n\n      this.password.loading = true;\n\n      this.axios\n        .put(\"/api/v1/user/\" + this.$store.state.username, {\n          currentPassword: this.password.current,\n          newPassword: this.password.new,\n        })\n        .then(() => {\n          this.password.loading = false;\n\n          this.password.current = \"\";\n          this.password.new = \"\";\n        })\n        .catch((e) => {\n          this.password.loading = false;\n\n          console.log(e);\n\n          AjaxErrorHandler(this.$store)(e, (error) => {\n            if (error.path === \"hash\") {\n              this.password.errors[\"new password\"] = error.message;\n            }\n          });\n        });\n    },\n\n    deleteAccount() {\n      this.deleteAccountLoading = true;\n\n      this.axios\n        .delete(\"/api/v1/user/\" + this.$store.state.username)\n        .then(() => {\n          this.deleteAccountLoading = false;\n\n          this.$store.commit(\"setUsername\", null);\n          this.$router.push(\"/\");\n        })\n        .catch((e) => {\n          this.deleteAccountLoading = false;\n          AjaxErrorHandler(this.$store)(e);\n        });\n    },\n  },\n  mounted() {\n    this.$store.dispatch(\"setTitle\", \"account settings\");\n\n    logger(\"settingsAccount\");\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n@import \"../../assets/scss/variables.scss\";\n\n@media (max-width: $breakpoint--tablet) {\n  .h1 {\n    display: none;\n  }\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SettingsAccount.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SettingsAccount.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./SettingsAccount.vue?vue&type=template&id=688ae8a4&scoped=true&\"\nimport script from \"./SettingsAccount.vue?vue&type=script&lang=js&\"\nexport * from \"./SettingsAccount.vue?vue&type=script&lang=js&\"\nimport style0 from \"./SettingsAccount.vue?vue&type=style&index=0&id=688ae8a4&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"688ae8a4\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SettingsAccount.vue?vue&type=style&index=0&id=688ae8a4&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SettingsAccount.vue?vue&type=style&index=0&id=688ae8a4&lang=scss&scoped=true&\"","import axios from \"axios\";\n\nexport default function(route, resourceId) {\n  //In which case resourceId is really the username\n  if (route === \"userPosts\" || route === \"userThreads\") {\n    axios\n      .get(\"/api/v1/user/\" + resourceId)\n      .then(res => {\n        return axios.post(\"/api/v1/log\", {\n          route,\n          resourceId: res.data.id\n        });\n      })\n      .catch(console.log);\n  } else {\n    axios\n      .post(\"/api/v1/log\", {\n        route,\n        resourceId\n      })\n      .catch(console.log);\n  }\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('modal-window',{attrs:{\"value\":_vm.showModal},on:{\"input\":_vm.setShowModal}},[_c('div',{staticStyle:{\"padding-top\":\"1rem\"},attrs:{\"slot\":\"main\"},slot:\"main\"},[_vm._t(\"default\")],2),_c('div',{attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('button',{staticClass:\"button button--modal\",class:_vm.buttonColor,on:{\"click\":_vm.confirm}},[_vm._v(\" \"+_vm._s(_vm.text || \"OK\")+\" \")]),_c('button',{staticClass:\"button button--modal\",on:{\"click\":function($event){return _vm.setShowModal(false)}}},[_vm._v(\" Cancel \")])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <modal-window :value=\"showModal\" @input=\"setShowModal\">\n    <div slot=\"main\" style=\"padding-top: 1rem\">\n      <slot></slot>\n    </div>\n    <div slot=\"footer\">\n      <button\n        class=\"button button--modal\"\n        :class=\"buttonColor\"\n        @click=\"confirm\"\n      >\n        {{ text || \"OK\" }}\n      </button>\n      <button class=\"button button--modal\" @click=\"setShowModal(false)\">\n        Cancel\n      </button>\n    </div>\n  </modal-window>\n</template>\n\n<script>\nimport ModalWindow from \"./ModalWindow\";\n\nexport default {\n  name: \"ConfirmModal\",\n  props: [\"value\", \"color\", \"text\"],\n  components: {\n    ModalWindow,\n  },\n  data() {\n    return {\n      showModal: false,\n    };\n  },\n  computed: {\n    buttonColor() {\n      if (this.color) {\n        return \"button--\" + this.color;\n      } else {\n        return \"\";\n      }\n    },\n  },\n  watch: {\n    value(val) {\n      this.showModal = val;\n    },\n  },\n  methods: {\n    setShowModal(val) {\n      this.showModal = val;\n      this.$emit(\"input\", val);\n    },\n    confirm() {\n      this.$emit(\"confirm\");\n      this.setShowModal(false);\n    },\n  },\n  mounted() {\n    this.setShowModal(this.value);\n  },\n};\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ConfirmModal.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ConfirmModal.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ConfirmModal.vue?vue&type=template&id=16c2f845&\"\nimport script from \"./ConfirmModal.vue?vue&type=script&lang=js&\"\nexport * from \"./ConfirmModal.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}